# Terminal Adventure Game - Docker Environment Configuration
# Copy this file to .env and customize the values for your deployment

# ============================================
# Application Configuration
# ============================================

# HTTP server port (internal, not exposed directly)
# Default: 3001 (keep this as 3001 for Docker networking)
PORT=3001

# Admin password for sudo command and admin mode
# Default: admin123
# IMPORTANT: Change this in production!
ADMIN_PASSWORD=admin123

# ============================================
# LM Studio AI Configuration
# ============================================

# LM Studio API endpoint
# Default: http://192.168.0.18:1234
# Note: Use host.docker.internal if LM Studio is running on the host machine
LMSTUDIO_BASE_URL=http://192.168.0.18:1234

# AI model name to use
# Default: default (uses the currently loaded model in LM Studio)
LMSTUDIO_MODEL=default

# Request timeout in milliseconds
# Default: 30000 (30 seconds)
LMSTUDIO_TIMEOUT=30000

# AI temperature (0.0 - 1.0, higher = more creative)
# Default: 0.8
LMSTUDIO_TEMPERATURE=0.8

# Maximum tokens in AI response
# Default: 150
LMSTUDIO_MAX_TOKENS=150

# ============================================
# Nginx Configuration
# ============================================

# External HTTP port (exposed to host)
# Default: 8888
NGINX_PORT=8888

# Rate limit (requests per second per IP)
# Default: 10r/s
# Examples: 5r/s, 20r/s, 100r/m (100 per minute)
RATE_LIMIT=10r/s

# Maximum client body size (file uploads)
# Default: 10M
CLIENT_MAX_BODY_SIZE=10M

# ============================================
# Fail2ban Configuration
# ============================================

# Ban duration in seconds
# Default: 3600 (1 hour)
# Examples: 600 (10 min), 3600 (1 hour), 86400 (24 hours)
FAIL2BAN_BANTIME=3600

# Time window for counting failed attempts (seconds)
# Default: 600 (10 minutes)
FAIL2BAN_FINDTIME=600

# Maximum failed attempts before ban
# Default: 5
FAIL2BAN_MAXRETRY=5

# ============================================
# Notes
# ============================================

# LM Studio Setup:
# 1. Install LM Studio from https://lmstudio.ai/
# 2. Download and load a model (e.g., Llama 2, Mistral)
# 3. Start the local server (default port: 1234)
# 4. Update LMSTUDIO_BASE_URL if needed
#
# If LM Studio is on the same machine as Docker:
#   - Linux/Mac: Use http://host.docker.internal:1234
#   - Windows: Use http://host.docker.internal:1234
#   - Or use your machine's IP address

# Security Best Practices:
# - Change ADMIN_PASSWORD from default
# - Use strong passwords (12+ characters, mixed case, numbers, symbols)
# - Adjust FAIL2BAN settings based on your traffic patterns
# - Consider lowering RATE_LIMIT if under attack
# - Monitor logs regularly: docker compose logs -f

# Volume Persistence:
# Game data is stored in Docker volume 'game-data'
# To backup: docker run --rm -v game-data:/data -v $(pwd):/backup alpine tar czf /backup/game-data-backup.tar.gz -C /data .
# To restore: docker run --rm -v game-data:/data -v $(pwd):/backup alpine tar xzf /backup/game-data-backup.tar.gz -C /data
